# Contribution Guide

## Autogeneration of SDKs

1. All SDKs are autogenerated using [OpenAPI Generator project](https://github.com/OpenAPITools/openapi-generator).
2. The RHOAS CLI is used for authentication. It can be [found here](https://github.com/redhat-developer/app-services-cli#installing-rhoas).
3. Developers are responsible for creating [tagged releases of the SDKs](https://github.com/redhat-developer/app-services-sdk-python/releases). Once a new release is tagged on GitHub, the SDK is rebuilt and is [published to PyPI](https://pypi.org/project/rhoas-sdks/). This is done via this [GitHub Workflow](.github/workflows/release.yaml).

## Development
Python3 is needed for SDK development. It can be [found here](https://www.python.org/downloads/).

Make targets are used for all commands in this repoistory.
To get a list of available targets run:

```make
make help
```

Running the following command to get started with Poetry for Python (on Linux / MacOS):

```bash
make install-setup
```

For more information on getting started with [Poetry(including Windows install) vist here](https://python-poetry.org/docs/#installation). 

Here is a handy [cheat sheet for poetry](https://gist.github.com/CarlosDomingues/b88df15749af23a463148bd2c2b9b3fb).


## Generating API clients locally

```bash
make generate
```

## Build Python wheel for distribution

```bash
make build
```

## Onboarding a new API
The OpenAPI Spec file should be validated before being added to the SDK genartion list.
This can be done as follows:

```bash
echo 'extends: "@rhoas/spectral-ruleset"' > .spectral.yaml
npm install -g @rhoas/spectral-ruleset
rhoasapi lint openapi.yaml
```

For more info see:
<http://api.appservices.tech/spectral/>


The [generate.sh](./scripts/generate.sh) script should then be updated with the new API details.

Errors will need to be added too.